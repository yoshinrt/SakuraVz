<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<link rel="stylesheet" href="dsk_sakura.css" type="text/css">
<link rel="shortcut icon" href="images/favicon.ico">
<TITLE>変更履歴(2000/05/12〜)</TITLE>
<META NAME="MS-HKWD" CONTENT="変更履歴">
</HEAD>
<BODY>
<script type="text/javascript" src="item.js"></script>
<noscript>[<a href="HLP000001.html">目次</a>]<br></noscript>
<h2>変更履歴(2000/05/12〜)</h2>
Sep 28, 2000 (β10)<br>
<div class=li200>
・じぇぷろさんの修正点を全て反映．アイコン配列が変更されているため，以前の sakura.ini を読み込むとツールバーアイコンがでたらめになります．<br>
</div><br>
じぇぷろさんによる修正点は以下の通り．<br>
<div class=li200>
・ソースからの半角カタカナ一掃計画(キャプション中心だがプログラムコメントも全部)<br>
・ソース内の用語統一・変更<br>
<div class=li400>
例1.  ウインドウ、半角のウィンドウ→ウィンドウ<br>
例2.  バックタグジャンプ→タグジャンプバック<br>
例3.  リターンキー→エンターキー<br>
例4． アクティヴ→アクティブ<br>
例5． ビュワー→ビューア<br>
</div><br>
・メニュータイトルなどの統一・変更<br>
<div class=li400>
例1． 共通設定のキーボード→キーバインド<br>
理由1. キーワードと似ている。<br>
理由2. ハード的設定と勘違いしやすい。<br>
</div><br>
・ダイアログの修正(現在は共通設定中心)<br>
<div class=li400>
例1.  できるだけすべてにアクセスキーを設定<br>
例2.  ツールバー、カスタムメニュー、キーバインドの縦長ウィンドウ化と「機能→設定したいもの」の順に左右配列<br>
</div><br>
・「アプリケーション終了」では味気ないので→「テキストエディタの終了」に<br>
・「検索」メニューに「対括弧の検索([)」を追加（せっかくあるんだもの。）<br>
・ファイルの「プロパティ」にWin標準キーアサインのAlt+Enterを追加<br>
・「*.cを開く」「*.hを開く」のキャプションを実際の動作に即し少し変更<br>
・「大文字→小文字」とその逆に英を追加して英大文字のように変更(英語はやめ)<br>
・「ヘルプ」の目次とトピックの検索を上に移動(多分これが本来でしょ？)<br>
・シングルクォーテーション文字列にも黒以外の色を割り当て。ただし表示はしない。<br>
・基本とテキストのときはダブルクォーテーション文字列も色表示しない様に変更。<br>
・(HTMLだけに色を付けるようにすることも考えていたが、むしろプログラム的なものには付けて、そうでないものには色を付けないほうがいいと思っての措置です。)<br>
・ダイアログの文字種はPゴシック9ptに統一<br>
・左クリックの「左」は通常省いて言うのでそのように変更<br>
・Grep, grep → Grepに統一<br>
・印刷ページレイアウトの設定、ページ設定　→　ページ設定に統一<br>
・印刷ページ設定でアクセスキーがバッティングしていたのを修正<br>
・アイコンはメニューの第一階層だけはサブメニューを持つもの以外ほぼ追加した<br>
・共通設定ダイアログでヘルプボタンが効かなかったところを修正(ヘルプ自体は...(^_^;))<br>
・ファイルのプロパティは読み取り専用で開くようにした<br>
・数値を入力するところにはスピン(上下につっつくヤツね)を追加。(ただし自動保存の所はよくわからないので殺してある)<br>
・選択時に意味を持つ項目にはできるだけEnable/Disableを切り替えるようにした<br>
・メニューや項目の順番はかなり入れ替えた(わかりやすくしたつもり)<br>
・印刷設定で用紙の向きをラジオボタンに変更したかったができてないので殺してある　(-.-)<br>
・デフォルト設定でフォントはMSゴシック10ptにした<br>
・ツールバーに名前を付けて保存を追加<br>
・ショートカットをいくつか追加＆変更<br>
・各ダイアログでのタブ移動や矢印キーでの移動にもかなり配慮したつもり<br>
・コマンド一覧表示のとき下がステータスバーを隠してしまうので真ん中に移動<br>
・ファイルとフォルダの履歴MAXを30から36に変更(0-9とA-Zで36個になるので(^_^;))<br>
・縦横分割が解除可能の時はそのようなメッセージになるように変更<br>
・上とは逆にツールバーやファンクションキーなどを隠すことができる時にメッセージが「隠す」となっていてかつチェックが付いているのは違和感があるのでメッセージを変えないようにした．これは特に[アイコン付きメニュー]OFF時、Win標準と異なる仕様になって「ん？」なのです．<br>
・[タイプ別設定]‐[テキスト]の[折り返し桁数]を80→120に増やした<br>
・ツールバーに[タイプ別設定一覧]を追加<br>
・パス名に使用禁止の文字(\, |, *, &lt;, &gt; )を2バイト文字の2バイト目に含んでいる場合にタグジャンプできない不具合を修正<br>
(注)たまーにジャンプに時間がかかり、失敗したとメッセージされるが実際にはジャンプできているみたいです（初めに起動した直後が多い）．<br>
気にしないのが肝腎です。(^O^)<br>
・ダイアログをいろいろ修正<br>
<div class=li400>
(例)[キーバインド]タブで[割り当てている機能]が一見編集(削除など)できるので読み取り専用に変更<br>
</div><br>
・用語統一  (一例) BOX、矩形→矩形に統一<br>
</div><br>
Sep 26, 2000 (β9)<br>
<div class=li200>
・検索を続けると62回目に落ちる問題を修正．数が規定値を超えた場合に削除する項目数の指定が間違っていた．<br>
・「すべて選択」を行ってもカーソルが移動しないようにした．<br>
・「移動履歴」の分類を検索系からカーソル移動系に移動した．<br>
・JUMP元に戻る機能において水平位置も保存するようにした．ただし，次検索の作りの問題から検索文字列の末尾にカーソルが来てしまう．<br>
</div><br>
Sep 22, 2000 (β8)<br>
<div class=li200>
・多少変更してVisual C++でコンパイルし直したら割とまともになりました．機能は9/8のデモ版相当です．<br>
・STLを使ったら少しサイズが大きくなりました．<br>
<div class=li400>
今日のTIPS<br>
<br>
関数をexport指定するには，その要素がすべてexport指定されていないと怒られます．しかし，STL (Standard Template Library) にはexport指定がない，というよりTemplateクラスにexport指定が出来ない(？詳細不明)のでexportするクラスのメンバーとしてSTLテンプレートを利用できません．<br>
<br>
でもメンバーではなくてポインタならOKなので，STLを含む（外部と無関係な）クラスからexport指定を外して作った上で，export指定があるクラスにはそのクラスへのポインタだけ用意します．そしてexportするクラスではconstructorでnewしてdestructorでdeleteすればOKです．<br>
</div></div><br>
Sep 8, 2000 (β7)<br>
<div class=li200>
・Jump元に戻る機能を付けた．元に戻れるのは以下の場合．<br>
<div class=li400>
検索<br>
次・前を検索<br>
全てを選択（これをやるとカーソルが先頭に移動する）<br>
</div><br>
・ただし，Jump元に戻ったあとさらに進もうとしても最後の位置に進めない．<br>
・Perlの関数一覧（アウトライン解析）機能（簡易版）を追加．<br>
・本バージョンは以下の理由からDEMO Versionとします．<br>
<div class=li400>
1.終了時にプロセスが完全に消えてくれないことがある．<br>
2.Visual C++でコンパイルできないので，Borland C++でコンパイルした．<br>
</div></div><br>
Aug 23, 2000 (β6)<br>
<div class=li200>
・「ファイル」メニューにあるファイルとフォルダの履歴にも0〜9, A〜Zのアクセスキーを付けた．<br>
</div><br>
Aug. 22, 2000 (β5)<br>
<div class=li200>
・EOF直前で文字を挿入するUndo/Redoを行うと落ちていた問題を修正．行末記号の後ろから選択されているときは次行の先頭からと見なすようするルールをEOF直前で適用すると存在しない行の行頭を指定したことになってその先の処理でおかしくなっていた．<br>
</div><br>
Aug. 21, 2000 (β4)<br>
<div class=li200>
・自動保存機能を追加．<br>
・タスクトレイメニューの「最近使ったファイル」で表示履歴数の制限がかかっていなかったのを修正．<br>
・タスクトレイメニューの「最近使ったファイル」で，10個目以降にもアクセスキー(A-Z)を設定するようにしてみた．<br>
</div><br>
Aug. 18, 2000 (β3)<br>
<div class=li200>
・ルーラーの文字位置マークで文字の間隔が考慮されていなかった問題を修正（by あおさん）<br>
</div><br>
Aug. 16, 2000 (β2)<br>
<div class=li200>
・デフォルト値の変更<br>
<div class=li400>
・反対向きの括弧キー(Ctrl+[)の標準機能にも括弧検索を追加<br>
・Double Quoteを黒以外にして，デフォルトで色分けON<br>
</div><br>
・読み取り専用の時，上書き，挿入のモード切替を無効化した（無意味なので）<br>
・ファイルのプロパティを全角化<br>
・「名前を付けて保存」で初期値として現在のファイル名を表示するのをやめた．<br>
・日付付きバックアップファイルに関する設定保存方法を変更した．申し訳ありませんがこの機能を利用している人は再度設定して下さい．<br>
・世代付きバックアップ(b00〜b98)を可能にした．99代まで可能．<br>
・設定で世代数を減らした後に保存するとそれ以上のバックアップファイルもあわせて削除されます．例えば，b00〜b09まで10世代保存する設定から3世代に変更して保存を行うと，b00〜b02が更新されると共にb03〜b09も削除されます．<br>
・先頭の'b'も実は変更可能ですがインターフェースを用意してありません．設定ファイルの書き換えでもできますが，要望があればインターフェースを追加します．<br>
・EOFの直前で文字が追加されるUndo/Redoを行うと落ちるバグは修正されていません．<br>
</div><br>
Aug. 14, 2000 (β1)<br>
<div class=li200>
・上書き禁止および読み取り専用の場合にはファイルの編集ができないようにした．上書き禁止ファイルを編集したいときは，編集開始前に「名前を付けて保存」して下さい．<br>
</div><br>
Jul. 25, 2000<br>
<br>
Tripodが応答しなかったので更新が遅れた．<br>
<div class=li200>
・Caret関係のShareDataアクセスでアクセス関数を使うように変更．<br>
・「全行引用コピー」を編集メニューに追加．<br>
・「改行コードをCRLFに変換してコピー」機能を追加．これがないと，改行コードがCRLF以外のテキストから別のプログラムにCUT&amp;Pasteしたときにおかしくなる．「改行コードをXXに変換してコピー」「改行コードを削除してコピー」というのもすぐ追加できるけど追加していない．<br>
</div><br>
Jun. 23, 2000<br>
<div class=li200>
・6/1に修正したつもりの行末以降を選択して貼り付けるとおかしくなる問題が何にも直っていなかった．修正部を移動したときに変数名を書き換え忘れていた．また，行の行末以降のみが選択されている場合には選択部分の先頭にカーソルがあると考えて貼り付けるようにした．<br>
</div><br>
Jun. 19, 2000<br>
<div class=li200>
・最終行が空の時，そこで対括弧検索を行うと落ちるのを修正(NULLチェック忘れ)．<br>
</div><br>
Jun. 16, 2000<br>
<div class=li200>
・HTMLヘルプ，外部ヘルプが設定されていないときに出る「いますぐ設定しますか？」に「いいえ」と答えても空のヘルプが開いてしまうのを開かないようにした．<br>
・対応する括弧の検索機能を追加．メニューには入っていないのでキーボードに割り当てて下さい．（新規に設定ファイルが作られるときには	CTRL-]に割り当てられています）．分類は「検索系」です．<br>
</div><br>
Jun. 7, 2000<br>
<div class=li200>
・置換ダイアログボックスで「置換」を行った後ダイアログボックスをクリックしてもメインウィンドウにフォーカスが行ってしまう問題を修正（by みつさん）<br>
</div><br>
Jun. 1, 2000<br>
<div class=li200>
・TABを含む行を削除したとき位置がおかしくなる問題を修正(5/29の修正ミスその2）．TABがあると桁位置≠文字数となることを考慮し忘れていた．<br>
・削除で落ちる(6/1の修正ミス）．EOFの行が空行だとサイズ=0のせいかメモリが割り当てられておらずNULLポインタが返ってくるが，戻り値のNULLチェックをしていなかったのでそこでcrashしていた．5/31の時点では桁位置のみを使っていて内容は見ていなかったのでこの問題は起こらなかった．<br>
・行末以降を選択して貼り付けるとおかしくなる問題を修正．これに伴って桁位置修正部をDeleteDataからReplaceの方へ移動した．<br>
・他のウィンドウをALT+SPACE, Nで最小化してテキストエディタに制御が戻ってきてもウィンドウがActiveにならなかった問題を修正．<br>
</div><br>
May 31, 2000<br>
<div class=li200>
・削除で落ちる，位置がおかしくなる問題を修正(5/29の修正ミス）．論理行数を与えるところにレイアウト行数を与えていたために，誤った行情報を取得していた．<br>
・実行ファイル名の最後に0-5を含んでいるときに漢字コードを固定するようにしてみたが，こういうのはあまり好ましくないと思う．<br>
</div><br>
May 29, 2000<br>
<div class=li200>
・フリーカーソルモードで行末より後ろの部分から複数行に渡って選択して削除すると削除結果がおかしくなるのを修正．カーソル位置が行の長さより後ろにあるときの論理行→物理行の変換が正しくできないようなので，カーソルが行末より後ろにあるときはあらかじめ関係ない部分を除いた範囲に正規化してから削除を行うようにした．<br>
</div><br>
May 24, 2000<br>
<div class=li200>
・GrepのHit件数が16件おきにしか表示されなかったところを1件単位で更新されるようにした．<br>
・改行コード種別によって改行マークを変えるようにした．<br>
</div><br>
May 19, 2000<br>
<div class=li200>
・行をまたがるUndoで改行コードがおかしくなる問題を修正．改行コード種別を設定する先を間違えていた．<br>
</div><br>
May 16, 2000<br>
<div class=li200>
・（内部処理変更）行末コードを扱う部分をクラスにした．動作の変更は無し．<br>
・MS MouseのWheelを使った後，特殊キーが効かなくなる問題を修正．原因はWheelを使うとメッセージの送り先が親ウィンドウから子ウィンドウに変わってしまうにも関わらず子ウィンドウではWM_COMMANDメッセージを処理していなかった．WM_COMMANDメッセージが子ウィンドウに来たら，あらためて親ウィンドウにWM_COMMANDを転送するようにした．<br>
</div><br>
May 12, 2000 23:00<br>
<div class=li200>
・桁位置をメニュー右端に表示させるとはみ出してしまうのを修正.<br>
・ダイアログボックスのうちのいくつかについて半角カタカナを全角 or アルファベットに直した.<br>
</div><br>
May 12, 2000 20:00<br>
<div class=li200>
・テキストの標準改行コードという概念を導入．ファイル読み込み時に1行目を調べてそれを標準コードとするようにした．（CEditDocにファイルの改行コードを保持するメンバを追加した）<br>
・現在の標準改行コードをstatus barまたはメニュー右端に追加．<br>
</div><br>
May 12, 2000<br>
<div class=li200>
・改行コードが常にCRLFだったのを，1行目に合わせるようにした．これで，UNIXのperlに怒られなくなる．<br>
</div><br>
</BODY></HTML>
